# CTF-ASAS v2.0 深度逆向模块 - 环境部署方案 (Docker 版)

## 1. 现状说明

由于本地未安装 Ghidra (约 1.2GB，依赖 JDK)，为了保证环境的一致性与开箱即用，我们将采用 **Containerized Ghidra Headless** 方案。

## 2. 核心思路

1. **轻量化宿主**: 宿主机仅需安装 Docker。
2. **按需启动**: 当 Agent 发起 `reverse_analyze` 请求时，MCP Server 会动态启动一个预配置的 Ghidra 容器执行分析任务。
3. **数据共享**: 通过 Docker Volume 将题目文件映射入容器，分析结果（Ghidra 项目文件）持久化在本地 `assets/ghidra_projects` 目录。

## 3. 技术实施

### 3.1 Dockerfile (docker/ghidra/Dockerfile)

- 基础镜像: `openjdk:17-slim` 或 `blacktop/ghidra`。
- 集成 Jython 脚本，用于导出静态分析结果与反编译伪代码。

### 3.2 接口封装

- `reverse_ghidra.py`: 负责执行 `docker run --rm -v ... blacktop/ghidra analyzeHeadless ...` 命令并解析输出。

## 4. 下一步动作

- [ ] 创建 `docker/ghidra/Dockerfile`。
- [ ] 编写通用的 Jython 提取脚本。
- [ ] 在 MCP 中集成 Docker 调用逻辑。

---
Thought in Chinese: 容器化是解决复杂工具依赖的最佳实践，尤其是对于 Ghidra 这种重型工具。
